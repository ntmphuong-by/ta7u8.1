<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<title>Unit 8: FILMS - Full Game (Global Success)</title>
<style>
  :root {
    --primary: #6366f1;
    --primary-dark: #4338ca;
    --accent: #f59e0b;
    --success: #10b981;
    --danger: #ef4444;
    --bg: #f8fafc;
    --card: #ffffff;
    --text: #1e293b;
    --text-light: #64748b;
    --border: #e2e8f0;
    --radius: 16px;
    --font-main: system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  }

  * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
  body {
    margin: 0;
    font-family: var(--font-main);
    background: var(--bg);
    color: var(--text);
    line-height: 1.55;
    padding-bottom: 60px;
  }

  header {
    background: rgba(255,255,255,0.95);
    position: sticky; top: 0; z-index: 100;
    border-bottom: 1px solid var(--border);
    backdrop-filter: blur(12px);
    padding: 10px 0;
  }
  .header-inner {
    max-width: 1100px; margin: 0 auto; padding: 0 12px;
    display: flex; justify-content: space-between; align-items: center; gap: 10px;
  }
  .brand { display: flex; align-items: center; gap: 10px; min-width: 0; }
  .logo-badge {
    background: linear-gradient(135deg, var(--primary), #818cf8);
    color: white; width: 40px; height: 40px;
    border-radius: 10px; display: grid; place-items: center;
    font-weight: 900; font-size: 18px;
    box-shadow: 0 6px 16px rgba(99, 102, 241, 0.25);
    flex: 0 0 auto;
  }
  .brand-text { min-width: 0; }
  .brand-text h1 { margin: 0; font-size: 15px; font-weight: 800; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .brand-text p { margin: 0; font-size: 12px; color: var(--text-light); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

  .actions { display: flex; gap: 8px; flex: 0 0 auto; }
  .btn-icon {
    width: 40px; height: 40px; border-radius: 999px; border: 1px solid var(--border);
    background: white; display: grid; place-items: center; cursor: pointer;
    font-size: 16px; transition: 0.15s;
    user-select: none;
  }
  .btn-icon:active { transform: scale(0.98); }
  .btn-icon.active { background: var(--success); color: white; border-color: var(--success); }

  .container {
    max-width: 1100px; margin: 14px auto; padding: 0 12px;
    display: grid; grid-template-columns: 300px 1fr; gap: 16px;
  }

  /* Sidebar */
  .sidebar { position: sticky; top: 82px; align-self: start; }
  .stats-card {
    background: var(--card); border-radius: var(--radius); padding: 16px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05); border: 1px solid var(--border);
    margin-bottom: 12px;
  }
  .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 12px 0; }
  .stat-item {
    background: #f1f5f9; padding: 10px; border-radius: 12px; text-align: center;
  }
  .stat-val { font-size: 20px; font-weight: 900; color: var(--primary); display: block; }
  .stat-lbl { font-size: 11px; color: var(--text-light); text-transform: uppercase; font-weight: 800; letter-spacing: .02em; }

  .nav-menu { display: flex; flex-direction: column; gap: 8px; max-height: 62vh; overflow-y: auto; padding-right: 4px; }
  .nav-item {
    padding: 12px 12px; border-radius: 14px; cursor: pointer;
    display: flex; justify-content: space-between; align-items: center;
    background: transparent; border: 1px solid transparent; transition: 0.15s;
    font-size: 14px; font-weight: 700;
    text-align: left;
  }
  .nav-item:active { transform: scale(0.99); }
  .nav-item:hover { background: #f8fafc; border-color: var(--border); }
  .nav-item.active { background: var(--primary); color: white; box-shadow: 0 10px 20px rgba(99, 102, 241, 0.18); }
  .nav-tag {
    font-size: 11px; font-weight: 900; padding: 2px 10px; border-radius: 999px;
    background: rgba(0,0,0,0.05); color: var(--text-light);
  }
  .nav-item.active .nav-tag { background: rgba(255,255,255,0.22); color: white; }

  /* Main */
  .section-header {
    background: white; padding: 14px 14px; border-radius: var(--radius);
    border: 1px solid var(--border); margin-bottom: 12px;
    display: flex; justify-content: space-between; align-items: center; gap: 10px;
  }
  .section-title { font-size: 18px; font-weight: 900; color: var(--primary-dark); }
  .section-sub { font-size: 13px; color: var(--text-light); font-weight: 600; }

  .q-card {
    background: white; border-radius: var(--radius); margin-bottom: 14px;
    border: 1px solid var(--border); overflow: hidden;
  }
  .q-top {
    padding: 10px 14px; background: #f8fafc; border-bottom: 1px solid var(--border);
    display: flex; justify-content: space-between; align-items: center; gap: 10px;
  }
  .q-badge { font-size: 12px; font-weight: 900; color: var(--text-light); text-transform: uppercase; letter-spacing: .03em; }
  .q-content { padding: 14px; }

  .prompt { font-size: 15px; font-weight: 800; margin-bottom: 6px; color: #334155; }
  .prompt-vi { font-size: 13px; color: #059669; font-style: italic; margin-bottom: 10px; display: none; }
  body.show-vi .prompt-vi { display: block; }

  .reading-box {
    background: #fffbeb; border: 1px solid #fcd34d; padding: 14px; border-radius: 14px;
    margin-bottom: 14px; font-size: 14px; line-height: 1.6; color: #374151;
  }
  .reading-title { font-weight: 1000; color: #b45309; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; gap: 10px; }
  .reading-actions { display: flex; gap: 8px; flex-wrap: wrap; }
  .mini-btn {
    border: 1px solid var(--border);
    background: white;
    padding: 8px 10px;
    border-radius: 999px;
    font-weight: 900;
    font-size: 12px;
    cursor: pointer;
  }
  .mini-btn:active{ transform: scale(0.98); }

  .dialogue {
    background: #eef2ff;
    border: 1px solid #c7d2fe;
    padding: 12px;
    border-radius: 14px;
    margin-bottom: 14px;
  }
  .dlg-line {
    display: grid;
    grid-template-columns: 86px 1fr;
    gap: 10px;
    padding: 8px 8px;
    border-radius: 12px;
    background: rgba(255,255,255,.65);
    margin-bottom: 8px;
  }
  .dlg-speaker { font-weight: 1000; color: #3730a3; }
  .dlg-text { font-weight: 700; color: #111827; }
  .dlg-vi { margin-top: 4px; font-size: 13px; color: #059669; font-style: italic; display:none; }
  body.show-vi .dlg-vi { display:block; }
  .dlg-tools { display:flex; gap: 8px; flex-wrap: wrap; margin-bottom: 10px; }
  .chip {
    border: 1px solid #c7d2fe;
    background: white;
    padding: 8px 10px;
    border-radius: 999px;
    font-weight: 900;
    font-size: 12px;
    cursor: pointer;
  }

  /* Inputs */
  .opt-group { display: grid; gap: 10px; }
  .opt-label {
    display: flex; align-items: flex-start; gap: 10px; padding: 12px 12px;
    border: 2px solid var(--border); border-radius: 14px; cursor: pointer;
    transition: 0.12s; font-size: 14px; font-weight: 750;
  }
  .opt-label:active { transform: scale(0.995); }
  .opt-label.selected { border-color: var(--primary); background: #eef2ff; color: var(--primary-dark); }
  .opt-label input { display: none; }
  .opt-circle {
    width: 20px; height: 20px; border-radius: 50%; border: 2px solid #cbd5e1;
    display: grid; place-items: center; margin-top: 1px;
    flex: 0 0 auto;
  }
  .opt-label.selected .opt-circle { border-color: var(--primary); }
  .opt-label.selected .opt-circle::after {
    content: ""; width: 10px; height: 10px; background: var(--primary); border-radius: 50%;
  }
  .opt-text { flex: 1 1 auto; }
  .opt-vi { display:none; margin-top: 4px; font-size: 13px; color: #059669; font-style: italic; font-weight: 650; }
  body.show-vi .opt-vi { display:block; }

  .text-input {
    width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 14px;
    font-size: 16px; outline: none; font-family: inherit; transition: 0.12s;
  }
  .text-input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.12); }

  .match-row {
    display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px; align-items: center;
  }
  .match-select { padding: 10px; border-radius: 12px; border: 1px solid var(--border); width: 100%; font-size: 14px; font-weight: 700; background: white; }

  /* Feedback */
  .feedback {
    margin-top: 12px; padding: 12px; border-radius: 14px; font-size: 14px;
    background: #f0fdf4; border: 1px solid #bbf7d0;
    animation: fadeIn 0.2s ease;
  }
  .feedback.wrong { background: #fef2f2; border-color: #fecaca; }
  .fb-title { font-weight: 1000; margin-bottom: 6px; display: block; }
  .fb-ok { color: var(--success); font-weight: 1000; }
  .fb-bad { color: var(--danger); font-weight: 1000; }
  .exp { margin-top: 8px; color: #334155; font-weight: 650; }
  .exp-vi { margin-top: 6px; color: #059669; font-style: italic; font-weight: 650; display:none; }
  body.show-vi .exp-vi { display:block; }

  @keyframes fadeIn { from{opacity:0; transform:translateY(-4px)} to{opacity:1; transform:translateY(0)} }

  /* Buttons */
  .btn-check {
    background: var(--primary); color: white; border: none; width: 100%;
    padding: 12px; border-radius: 14px; font-weight: 1000; cursor: pointer;
    margin-top: 8px; box-shadow: 0 8px 18px rgba(99, 102, 241, 0.25);
    transition: 0.12s;
    font-size: 14px;
  }
  .btn-check:active { transform: scale(0.99); }
  .btn-reset {
    background: white; border: 1px solid var(--danger); color: var(--danger);
    width: 100%; padding: 11px; border-radius: 14px; font-weight: 900; cursor: pointer;
    margin-top: 8px; font-size: 14px;
  }
  .btn-reset:active { transform: scale(0.99); }

  .note {
    background: #f1f5f9;
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 12px;
    font-weight: 700;
    color: #334155;
  }
  .note .note-vi { display:none; margin-top:6px; color:#059669; font-style: italic; font-weight:650; }
  body.show-vi .note .note-vi { display:block; }

  /* MOBILE OPTIMIZE */
  @media (max-width: 900px) {
    .container { grid-template-columns: 1fr; }
    .sidebar { position: static; }
    .nav-menu {
      flex-direction: row;
      overflow-x: auto;
      overflow-y: hidden;
      max-height: none;
      padding-bottom: 6px;
      gap: 10px;
      scroll-snap-type: x mandatory;
    }
    .nav-item {
      min-width: 240px;
      flex: 0 0 auto;
      scroll-snap-align: start;
      border: 1px solid var(--border);
      background: white;
    }
    .nav-item.active { border-color: transparent; }
  }
</style>
</head>
<body>

<header>
  <div class="header-inner">
    <div class="brand">
      <div class="logo-badge">8</div>
      <div class="brand-text">
        <h1>UNIT 8: FILMS</h1>
        <p>Global Success 7 ‚Ä¢ Full Practice ‚Ä¢ Mobile Ready</p>
      </div>
    </div>
    <div class="actions">
      <div class="btn-icon" id="toggleVi" title="Hi·ªán/·∫®n ti·∫øng Vi·ªát">VN</div>
      <div class="btn-icon" id="toggleVoice" title="B·∫≠t/T·∫Øt gi·ªçng ƒë·ªçc">üîä</div>
      <div class="btn-icon" id="toggleMusic" title="B·∫≠t/T·∫Øt nh·∫°c n·ªÅn">‚ô™</div>
    </div>
  </div>
</header>

<div class="container">
  <aside class="sidebar">
    <div class="stats-card">
      <div style="font-weight:1000; margin-bottom:8px">Ti·∫øn ƒë·ªô l√†m b√†i</div>
      <div class="stat-grid">
        <div class="stat-item">
          <span class="stat-val" id="scoreDisplay">0</span>
          <span class="stat-lbl">ƒêi·ªÉm ƒë√∫ng</span>
        </div>
        <div class="stat-item">
          <span class="stat-val" id="progressDisplay">0%</span>
          <span class="stat-lbl">ƒê√£ tr·∫£ l·ªùi</span>
        </div>
      </div>
      <button class="btn-check" id="checkSectionBtn">‚ú® Ch·∫•m ƒëi·ªÉm PH·∫¶N N√ÄY</button>
      <button class="btn-reset" id="resetBtn">L√†m l·∫°i t·ª´ ƒë·∫ßu</button>
      <div class="note" style="margin-top:10px">
        M·∫πo: b·∫•m VN ƒë·ªÉ hi·ªán d·ªãch. B·∫•m üîä ƒë·ªÉ nghe theo vai.
        <div class="note-vi">Tr√™n ƒëi·ªán tho·∫°i: n·∫øu kh√¥ng nghe ƒë∆∞·ª£c, h√£y b·∫•m v√†o n√∫t üîä m·ªôt l·∫ßn r·ªìi th·ª≠ l·∫°i (tr√¨nh duy·ªát c·∫ßn ‚Äút∆∞∆°ng t√°c ng∆∞·ªùi d√πng‚Äù).</div>
      </div>
    </div>
    <div class="nav-menu" id="navMenu"></div>
  </aside>

  <main id="mainContent"></main>
</div>

<script>
/* ============================================================
   UNIT 8 - FILMS (Global Success)
   N·ªôi dung ƒë∆∞·ª£c b·ªï sung theo c√°c trang b·∫°n ch·ª•p:
   - Getting Started: h·ªôi tho·∫°i + Ex2,3,4,5
   - A Closer Look 1: vocab + Ex1,2 + Pronunciation 4,5
   - A Closer Look 2: Grammar + Ex1,2,3,4,5
   - Communication: Everyday English (accept/decline)
   - Skills 1: Survey listening + Reading blog + Qs + Speaking table
   - Skills 2: Listening + Writing
   - Looking Back: Vocab + Grammar
   ============================================================ */

const DB = [
  /* ------------------- PART 1: GETTING STARTED ------------------- */
  {
    id: "part1",
    title: "1. Getting Started",
    desc: "Let's go to the cinema tonight! (p.82-83)",
    dialogue: {
      title: "Listen and read",
      titleVi: "Nghe v√† ƒë·ªçc",
      roles: ["Mark", "Mi"],
      lines: [
        { sp:"Mark", en:"Let's go to the cinema tonight!", vi:"T·ªëi nay m√¨nh ƒëi r·∫°p chi·∫øu phim nh√©!" },
        { sp:"Mi",   en:"Good idea! What shall we see?", vi:"√ù hay ƒë·∫•y! M√¨nh xem g√¨ nh·ªâ?" },
        { sp:"Mark", en:"A Nightmare is on at Sao Mai Cinema tonight.", vi:"Phim A Nightmare ƒëang chi·∫øu ·ªü r·∫°p Sao Mai t·ªëi nay." },
        { sp:"Mi",   en:"Is it a fantasy?", vi:"ƒê√≥ l√† phim gi·∫£ t∆∞·ªüng √†?" },
        { sp:"Mark", en:"No, it's a horror film.", vi:"Kh√¥ng, ƒë√≥ l√† phim kinh d·ªã." },
        { sp:"Mi",   en:"That's too scary for me. Look! An Old Pier is on at Town Cinema. It's a documentary.", vi:"Th·∫ø th√¨ ƒë√°ng s·ª£ qu√° v·ªõi m√¨nh. Nh√¨n n√†y! An Old Pier ƒëang chi·∫øu ·ªü r·∫°p Town. ƒê√≥ l√† phim t√†i li·ªáu." },
        { sp:"Mark", en:"I don't really like documentaries. They're often boring. What about Our Holiday?", vi:"M√¨nh kh√¥ng th√≠ch phim t√†i li·ªáu l·∫Øm. Th∆∞·ªùng th√¨ ch√°n. Th·∫ø c√≤n Our Holiday th√¨ sao?" },
        { sp:"Mi",   en:"What kind of film is it?", vi:"ƒê√≥ l√† phim th·ªÉ lo·∫°i g√¨?" },
        { sp:"Mark", en:"It's a comedy.", vi:"ƒê√≥ l√† phim h√†i." },
        { sp:"Mi",   en:"And who stars in it?", vi:"V√† ai ƒë√≥ng vai ch√≠nh?" },
        { sp:"Mark", en:"Kate Harrison and Lily Collins.", vi:"Kate Harrison v√† Lily Collins." },
        { sp:"Mi",   en:"Um, they're pretty good. What's it about?", vi:"·ª™m, h·ªç kh√° hay. Phim n√≥i v·ªÅ ƒëi·ªÅu g√¨?" },
        { sp:"Mark", en:"It's about two women living in different countries and they decide to exchange houses.", vi:"Phim k·ªÉ v·ªÅ hai ng∆∞·ªùi ph·ª• n·ªØ s·ªëng ·ªü hai n∆∞·ªõc kh√°c nhau v√† h·ªç quy·∫øt ƒë·ªãnh ƒë·ªïi nh√† cho nhau." },
        { sp:"Mi",   en:"What are the reviews like?", vi:"ƒê√°nh gi√° v·ªÅ phim th·∫ø n√†o?" },
        { sp:"Mark", en:"Well, although a few people say it's a bit silly, most say it's funny and interesting.", vi:"√Ä, m·∫∑c d√π m·ªôt v√†i ng∆∞·ªùi n√≥i n√≥ h∆°i ng·ªõ ng·∫©n, nh∆∞ng ƒëa s·ªë n√≥i phim h√†i v√† th√∫ v·ªã." }
      ]
    },
    items: [
      /* Ex2 */
      { id:"gs_ex2_q1", type:"mcq",
        prompt:"Ex 2: What does Mark suggest doing tonight?",
        vi:"Mark g·ª£i √Ω l√†m g√¨ t·ªëi nay?",
        opts:[
          {en:"A. Watching a TV show", vi:"A. Xem ch∆∞∆°ng tr√¨nh TV"},
          {en:"B. Watching a film", vi:"B. Xem m·ªôt b·ªô phim"},
          {en:"C. Staying at home", vi:"C. ·ªû nh√†"}
        ],
        ans:"B",
        exp:"Mark says: ‚ÄúLet‚Äôs go to the cinema tonight!‚Äù ‚Üí He suggests going to watch a film at the cinema.",
        expVi:"Mark n√≥i: ‚ÄúT·ªëi nay m√¨nh ƒëi r·∫°p chi·∫øu phim nh√©!‚Äù ‚Üí Nghƒ©a l√† g·ª£i √Ω ƒëi xem phim."
      },
      { id:"gs_ex2_q2", type:"mcq",
        prompt:"Ex 2: Why doesn't Mark want to see 'An Old Pier'?",
        vi:"V√¨ sao Mark kh√¥ng mu·ªën xem 'An Old Pier'?",
        opts:[
          {en:"A. He doesn't like that type of film", vi:"A. B·∫°n ·∫•y kh√¥ng th√≠ch th·ªÉ lo·∫°i phim ƒë√≥"},
          {en:"B. It's not on at a convenient time", vi:"B. Gi·ªù chi·∫øu kh√¥ng ti·ªán"},
          {en:"C. He saw it last week", vi:"C. B·∫°n ·∫•y ƒë√£ xem tu·∫ßn tr∆∞·ªõc"}
        ],
        ans:"A",
        exp:"Mark says he doesn't really like documentaries because they're often boring. 'An Old Pier' is a documentary.",
        expVi:"Mark n√≥i kh√¥ng th√≠ch phim t√†i li·ªáu v√¨ th∆∞·ªùng ch√°n. 'An Old Pier' l√† phim t√†i li·ªáu."
      },
      { id:"gs_ex2_q3", type:"mcq",
        prompt:"Ex 2: The word 'reviews' mostly means:",
        vi:"T·ª´ 'reviews' g·∫ßn nghƒ©a nh·∫•t l√†:",
        opts:[
          {en:"A. people's opinions about a film", vi:"A. √Ω ki·∫øn/nh·∫≠n x√©t c·ªßa m·ªçi ng∆∞·ªùi v·ªÅ phim"},
          {en:"B. interesting scenes in a film", vi:"B. c√°c c·∫£nh hay trong phim"},
          {en:"C. what people don't like about a film", vi:"C. ƒëi·ªÅu m·ªçi ng∆∞·ªùi kh√¥ng th√≠ch v·ªÅ phim"}
        ],
        ans:"A",
        exp:"In context, 'reviews' refers to comments/opinions from viewers/critics about the film.",
        expVi:"Theo ng·ªØ c·∫£nh, 'reviews' l√† c√°c nh·∫≠n x√©t/ƒë√°nh gi√° c·ªßa ng∆∞·ªùi xem ho·∫∑c nh√† ph√™ b√¨nh."
      },
      { id:"gs_ex2_q4", type:"mcq",
        prompt:"Ex 2: What do people think of 'Our Holiday'?",
        vi:"M·ªçi ng∆∞·ªùi nghƒ© g√¨ v·ªÅ phim 'Our Holiday'?",
        opts:[
          {en:"A. Everyone likes it", vi:"A. Ai c≈©ng th√≠ch"},
          {en:"B. No one likes it", vi:"B. Kh√¥ng ai th√≠ch"},
          {en:"C. Most people like it", vi:"C. ƒêa s·ªë m·ªçi ng∆∞·ªùi th√≠ch"}
        ],
        ans:"C",
        exp:"Mark says: although a few people say it's silly, most say it's funny and interesting ‚Üí most people like it.",
        expVi:"Mark n√≥i: d√π v√†i ng∆∞·ªùi ch√™ ng·ªõ ng·∫©n, nh∆∞ng ƒëa s·ªë khen h√†i v√† th√∫ v·ªã ‚Üí ƒëa s·ªë th√≠ch."
      },

      /* Ex3 */
      { id:"gs_ex3_1", type:"mcq",
        prompt:"Ex 3: A film that tries to make the audience laugh is a ______.",
        vi:"Phim c·ªë g·∫Øng l√†m kh√°n gi·∫£ c∆∞·ªùi l√† phim ______.",
        opts:[
          {en:"A. comedy", vi:"A. phim h√†i"},
          {en:"B. documentary", vi:"B. phim t√†i li·ªáu"}
        ],
        ans:"A",
        exp:"Comedy = a film intended to make people laugh.",
        expVi:"Comedy l√† phim ch·ªß ƒë√≠ch t·∫°o ti·∫øng c∆∞·ªùi."
      },
      { id:"gs_ex3_2", type:"mcq",
        prompt:"Ex 3: A film based only on imagination, not real facts, is a ______.",
        vi:"Phim d·ª±a tr√™n t∆∞·ªüng t∆∞·ª£ng (kh√¥ng d·ª±a s·ª± th·∫≠t) l√† ______.",
        opts:[
          {en:"A. comedy", vi:"A. phim h√†i"},
          {en:"B. fantasy", vi:"B. phim gi·∫£ t∆∞·ªüng"}
        ],
        ans:"B",
        exp:"Fantasy = imaginary stories, not real-life facts.",
        expVi:"Fantasy l√† c√¢u chuy·ªán t∆∞·ªüng t∆∞·ª£ng, kh√¥ng ph·∫£i s·ª± ki·ªán c√≥ th·∫≠t."
      },
      { id:"gs_ex3_3", type:"mcq",
        prompt:"Ex 3: A film that shows real life events or stories is a ______.",
        vi:"Phim ph·∫£n √°nh s·ª± ki·ªán/c√¢u chuy·ªán ƒë·ªùi th·ª±c l√† ______.",
        opts:[
          {en:"A. documentary", vi:"A. phim t√†i li·ªáu"},
          {en:"B. horror film", vi:"B. phim kinh d·ªã"}
        ],
        ans:"A",
        exp:"Documentary = film about real life events/stories.",
        expVi:"Documentary l√† phim v·ªÅ s·ª± ki·ªán/c√¢u chuy·ªán c√≥ th·∫≠t."
      },
      { id:"gs_ex3_4", type:"mcq",
        prompt:"Ex 3: A film set in the future, often about science, is a ______.",
        vi:"Phim l·∫•y b·ªëi c·∫£nh t∆∞∆°ng lai, th∆∞·ªùng v·ªÅ khoa h·ªçc l√† ______.",
        opts:[
          {en:"A. cartoon", vi:"A. phim ho·∫°t h√¨nh"},
          {en:"B. science fiction film", vi:"B. phim khoa h·ªçc vi·ªÖn t∆∞·ªüng"}
        ],
        ans:"B",
        exp:"Science fiction (sci-fi) often involves future settings, science, technology.",
        expVi:"Sci-fi th∆∞·ªùng c√≥ b·ªëi c·∫£nh t∆∞∆°ng lai, khoa h·ªçc/c√¥ng ngh·ªá."
      },
      { id:"gs_ex3_5", type:"mcq",
        prompt:"Ex 3: A film in which strange and frightening things happen is a ______.",
        vi:"Phim c√≥ nh·ªØng ƒëi·ªÅu l·∫° l√πng v√† ƒë√°ng s·ª£ x·∫£y ra l√† ______.",
        opts:[
          {en:"A. horror film", vi:"A. phim kinh d·ªã"},
          {en:"B. comedy", vi:"B. phim h√†i"}
        ],
        ans:"A",
        exp:"Horror films include frightening/strange scary events.",
        expVi:"Phim kinh d·ªã c√≥ c√°c t√¨nh hu·ªëng ƒë√°ng s·ª£/gh√™ r·ª£n."
      },

      /* Ex4 */
      { id:"gs_ex4_1", type:"fill",
        prompt:"Ex 4: Going to the hospital can be ______ for a child.",
        vi:"ƒêi b·ªánh vi·ªán c√≥ th·ªÉ ______ ƒë·ªëi v·ªõi tr·∫ª nh·ªè.",
        ans:"frightening",
        exp:"A child may feel scared ‚Üí frightening.",
        expVi:"Tr·∫ª nh·ªè c√≥ th·ªÉ s·ª£ ‚Üí frightening (ƒë√°ng s·ª£)."
      },
      { id:"gs_ex4_2", type:"fill",
        prompt:"Ex 4: The film was so ______ that the audience couldn't stop laughing.",
        vi:"B·ªô phim ______ ƒë·∫øn m·ª©c kh√°n gi·∫£ c∆∞·ªùi kh√¥ng ng·ª´ng.",
        ans:"funny",
        exp:"Couldn't stop laughing ‚Üí funny.",
        expVi:"C∆∞·ªùi kh√¥ng ng·ª´ng ‚Üí funny (h√†i h∆∞·ªõc)."
      },
      { id:"gs_ex4_3", type:"fill",
        prompt:"Ex 4: Many people cried when they saw the ______ scenes.",
        vi:"Nhi·ªÅu ng∆∞·ªùi ƒë√£ kh√≥c khi xem nh·ªØng c·∫£nh ______.",
        ans:"moving",
        exp:"Cried ‚Üí moving (emotional).",
        expVi:"Khi·∫øn ng∆∞·ªùi ta kh√≥c ‚Üí moving (c·∫£m ƒë·ªông)."
      },
      { id:"gs_ex4_4", type:"fill",
        prompt:"Ex 4: The film last night was so ______ that we fell asleep.",
        vi:"B·ªô phim t·ªëi qua ______ ƒë·∫øn n·ªói ch√∫ng t√¥i ng·ªß g·∫≠t.",
        ans:"boring",
        exp:"Fell asleep ‚Üí boring.",
        expVi:"Ng·ªß g·∫≠t ‚Üí boring (ch√°n)."
      },
      { id:"gs_ex4_5", type:"fill",
        prompt:"Ex 4: This book is ______. I got a lot of useful information from it.",
        vi:"Cu·ªën s√°ch n√†y ______. T√¥i nh·∫≠n ƒë∆∞·ª£c nhi·ªÅu th√¥ng tin h·ªØu √≠ch.",
        ans:"interesting",
        exp:"Useful information makes it interesting.",
        expVi:"C√≥ nhi·ªÅu th√¥ng tin h·ªØu √≠ch ‚Üí interesting (th√∫ v·ªã)."
      },

      /* Ex5 (pair work) - m·ªü */
      { id:"gs_ex5_open", type:"free",
        prompt:"Ex 5 (Pair work): Ask and answer about a type of film. Use adjectives in Ex 4.",
        vi:"L√†m vi·ªác theo c·∫∑p: H·ªèi ‚Äì ƒë√°p v·ªÅ m·ªôt th·ªÉ lo·∫°i phim. D√πng t√≠nh t·ª´ ·ªü Ex 4.",
        exp:"Open practice (no fixed answer). Suggested: ‚ÄúDo you like documentaries?‚Äù ‚ÄúNo, I don‚Äôt. I think they‚Äôre boring.‚Äù",
        expVi:"B√†i luy·ªán n√≥i (kh√¥ng c√≥ ƒë√°p √°n c·ªë ƒë·ªãnh). G·ª£i √Ω: ‚ÄúB·∫°n c√≥ th√≠ch phim t√†i li·ªáu kh√¥ng?‚Äù ‚ÄúKh√¥ng, m√¨nh th·∫•y n√≥ ch√°n.‚Äù"
      }
    ]
  },

  /* ------------------- PART 2: A CLOSER LOOK 1 ------------------- */
  {
    id:"part2",
    title:"2. A Closer Look 1",
    desc:"Vocabulary + Pronunciation /…™…ô/ and /e…ô/ (p.84)",
    items:[
      /* Vocab Ex1 match */
      { id:"cl1_ex1", type:"match",
        prompt:"Ex 1: Match the adjectives with their meanings.",
        vi:"N·ªëi t√≠nh t·ª´ v·ªõi nghƒ©a ph√π h·ª£p.",
        pairs:[
          { l:"dull",      r:"not interesting or exciting", viL:"dull (ch√°n)", viR:"kh√¥ng th√∫ v·ªã/kh√¥ng h·∫•p d·∫´n" },
          { l:"violent",   r:"containing lots of fighting and killing", viL:"violent (b·∫°o l·ª±c)", viR:"c√≥ nhi·ªÅu ƒë√°nh nhau, gi·∫øt ch√≥c" },
          { l:"confusing", r:"difficult to understand, not clear", viL:"confusing (kh√≥ hi·ªÉu)", viR:"kh√≥ hi·ªÉu, kh√¥ng r√µ r√†ng" },
          { l:"shocking",  r:"very surprising and difficult to believe", viL:"shocking (g√¢y s·ªëc)", viR:"r·∫•t b·∫•t ng·ªù, kh√≥ tin" },
          { l:"enjoyable", r:"giving pleasure", viL:"enjoyable (th√∫ v·ªã/d·ªÖ ch·ªãu)", viR:"mang l·∫°i ni·ªÅm vui, d·ªÖ ch·ªãu" }
        ],
        exp:"Match each adjective to its definition (meaning).",
        expVi:"Gh√©p m·ªói t√≠nh t·ª´ v·ªõi ƒë·ªãnh nghƒ©a (nghƒ©a) t∆∞∆°ng ·ª©ng."
      },

      /* Vocab Ex2 fill */
      { id:"cl1_ex2_1", type:"fill",
        prompt:"Ex 2: I found the film A Polluted Planet hard to believe. It's a very ______ documentary.",
        vi:"T√¥i th·∫•y phim A Polluted Planet kh√≥ tin. ƒê√≥ l√† phim t√†i li·ªáu r·∫•t ______.",
        ans:"shocking",
        exp:"Hard to believe ‚Üí shocking.",
        expVi:"Kh√≥ tin ‚Üí shocking (g√¢y s·ªëc)."
      },
      { id:"cl1_ex2_2", type:"fill",
        prompt:"Ex 2: The film was so ______ that we almost fell asleep.",
        vi:"B·ªô phim ______ ƒë·∫øn n·ªói ch√∫ng t√¥i su√Ωt ng·ªß g·∫≠t.",
        ans:"dull",
        exp:"Almost fell asleep ‚Üí dull (boring).",
        expVi:"Su√Ωt ng·ªß g·∫≠t ‚Üí dull (nh·∫°t/ch√°n)."
      },
      { id:"cl1_ex2_3", type:"fill",
        prompt:"Ex 2: I think you will enjoy Our Holiday. It's quite ______.",
        vi:"T·ªõ nghƒ© b·∫°n s·∫Ω th√≠ch Our Holiday. N√≥ kh√° ______.",
        ans:"enjoyable",
        exp:"Enjoy ‚Üí enjoyable.",
        expVi:"Enjoy (th√≠ch) ‚Üí enjoyable (th√∫ v·ªã/d·ªÖ ch·ªãu)."
      },
      { id:"cl1_ex2_4", type:"fill",
        prompt:"Ex 2: There were too many fights in the film. It was too ______.",
        vi:"Trong phim c√≥ qu√° nhi·ªÅu c·∫£nh ƒë√°nh nhau. N√≥ qu√° ______.",
        ans:"violent",
        exp:"Many fights ‚Üí violent.",
        expVi:"Nhi·ªÅu ƒë√°nh nhau ‚Üí violent (b·∫°o l·ª±c)."
      },
      { id:"cl1_ex2_5", type:"fill",
        prompt:"Ex 2: I didn‚Äôt really understand the film. It was very ______.",
        vi:"T·ªõ kh√¥ng hi·ªÉu l·∫Øm b·ªô phim. N√≥ r·∫•t ______.",
        ans:"confusing",
        exp:"Didn‚Äôt understand ‚Üí confusing.",
        expVi:"Kh√¥ng hi·ªÉu ‚Üí confusing (kh√≥ hi·ªÉu)."
      },

      /* Pronunciation - practice (no fixed answer, but ‚Äúƒë·ªß n·ªôi dung‚Äù) */
      { id:"cl1_pron_words", type:"free",
        prompt:"Pronunciation Ex 4: /…™…ô/ and /e…ô/ - words",
        vi:"Ph√°t √¢m Ex 4: /…™…ô/ v√† /e…ô/ - t·ª´",
        exp:"/…™…ô/: idea, pier, really, fear, ear.  /e…ô/: nightmare, their, share, hair, chair.",
        expVi:"/…™…ô/: idea, pier, really, fear, ear.  /e…ô/: nightmare, their, share, hair, chair."
      },
      { id:"cl1_pron_sent", type:"free",
        prompt:"Pronunciation Ex 5: Practise the sentences (pay attention to the underlined words).",
        vi:"Ph√°t √¢m Ex 5: Luy·ªán n√≥i c√°c c√¢u (ch√∫ √Ω ph·∫ßn g·∫°ch ch√¢n).",
        exp:"1) Is there a cinema near here? 2) There‚Äôs a chair under the stairs. 3) Put your earphones near here. 4) I don‚Äôt care about your idea. 5) Our aeroplane is up there, in the air.",
        expVi:"1) C√≥ r·∫°p chi·∫øu phim n√†o g·∫ßn ƒë√¢y kh√¥ng? 2) C√≥ m·ªôt c√°i gh·∫ø d∆∞·ªõi c·∫ßu thang. 3) ƒê·ªÉ tai nghe c·ªßa b·∫°n g·∫ßn ƒë√¢y. 4) T·ªõ kh√¥ng quan t√¢m √Ω t∆∞·ªüng c·ªßa b·∫°n. 5) M√°y bay c·ªßa ch√∫ng t√¥i ·ªü tr√™n kia, tr√™n kh√¥ng trung."
      }
    ]
  },

  /* ------------------- PART 3: A CLOSER LOOK 2 ------------------- */
  {
    id:"part3",
    title:"3. A Closer Look 2",
    desc:"Grammar: although/though & however (p.85-86)",
    items:[
      { id:"cl2_ex1_free", type:"free",
        prompt:"Ex 1: Combine the two sentences, using although / though.",
        vi:"N·ªëi 2 c√¢u, d√πng although/though.",
        exp:"Open practice. Example: Although she watched the film twice, she didn‚Äôt understand it.",
        expVi:"B√†i m·ªü. V√≠ d·ª•: Although she watched the film twice, she didn‚Äôt understand it. (M·∫∑c d√π c√¥ ·∫•y xem 2 l·∫ßn, c√¥ ·∫•y v·∫´n kh√¥ng hi·ªÉu.)"
      },

      /* Ex2 (ƒë√∫ng theo ·∫£nh: 1-5) */
      { id:"cl2_ex2_1", type:"mcq",
        prompt:"Ex 2: ______ the acting in the film was good, I didn‚Äôt like its story.",
        vi:"______ di·ªÖn xu·∫•t trong phim hay, t√¥i v·∫´n kh√¥ng th√≠ch c·ªët truy·ªán.",
        opts:[
          {en:"A. Although", vi:"A. M·∫∑c d√π"},
          {en:"B. However", vi:"B. Tuy nhi√™n"},
          {en:"C. Because", vi:"C. B·ªüi v√¨"}
        ],
        ans:"A",
        exp:"Although/Though + clause to connect two contrasting ideas in one sentence.",
        expVi:"Although/Though ƒë·ª©ng tr∆∞·ªõc m·ªánh ƒë·ªÅ ƒë·ªÉ n·ªëi 2 √Ω t∆∞∆°ng ph·∫£n trong C√ôNG m·ªôt c√¢u."
      },
      { id:"cl2_ex2_2", type:"mcq",
        prompt:"Ex 2: I felt really tired. ______, I went to see the film.",
        vi:"T√¥i r·∫•t m·ªát. ______, t√¥i v·∫´n ƒëi xem phim.",
        opts:[
          {en:"A. Although", vi:"A. M·∫∑c d√π"},
          {en:"B. However", vi:"B. Tuy nhi√™n"},
          {en:"C. So", vi:"C. V√¨ v·∫≠y"}
        ],
        ans:"B",
        exp:"However is used to contrast two sentences; usually ‚ÄúSentence. However, sentence.‚Äù",
        expVi:"However d√πng ƒë·ªÉ ƒë·ªëi l·∫≠p gi·ªØa HAI c√¢u; th∆∞·ªùng vi·∫øt ‚ÄúC√¢u 1. However, c√¢u 2.‚Äù"
      },
      { id:"cl2_ex2_3", type:"mcq",
        prompt:"Ex 2: I really enjoyed the film ______ most of my friends didn‚Äôt like it.",
        vi:"T√¥i r·∫•t th√≠ch b·ªô phim ______ h·∫ßu h·∫øt b·∫°n t√¥i kh√¥ng th√≠ch.",
        opts:[
          {en:"A. although", vi:"A. m·∫∑c d√π"},
          {en:"B. however", vi:"B. tuy nhi√™n"},
          {en:"C. so", vi:"C. v√¨ v·∫≠y"}
        ],
        ans:"A",
        exp:"Although links two clauses in one sentence: clause + although + clause.",
        expVi:"Although n·ªëi 2 m·ªánh ƒë·ªÅ trong 1 c√¢u: m·ªánh ƒë·ªÅ + although + m·ªánh ƒë·ªÅ."
      },
      { id:"cl2_ex2_4", type:"mcq",
        prompt:"Ex 2: He studied hard for the exam. ______, he failed it.",
        vi:"Anh ·∫•y h·ªçc chƒÉm. ______, anh ·∫•y v·∫´n tr∆∞·ª£t.",
        opts:[
          {en:"A. Although", vi:"A. M·∫∑c d√π"},
          {en:"B. However", vi:"B. Tuy nhi√™n"},
          {en:"C. Because", vi:"C. B·ªüi v√¨"}
        ],
        ans:"B",
        exp:"Two sentences with contrast ‚Üí However.",
        expVi:"Hai c√¢u ƒë·ªëi l·∫≠p ‚Üí d√πng However."
      },
      { id:"cl2_ex2_5", type:"mcq",
        prompt:"Ex 2: Mai speaks English very well ______ her native language is Vietnamese.",
        vi:"Mai n√≥i ti·∫øng Anh r·∫•t gi·ªèi ______ ti·∫øng m·∫π ƒë·∫ª c·ªßa Mai l√† ti·∫øng Vi·ªát.",
        opts:[
          {en:"A. although", vi:"A. m·∫∑c d√π"},
          {en:"B. however", vi:"B. tuy nhi√™n"},
          {en:"C. but", vi:"C. nh∆∞ng"}
        ],
        ans:"A",
        exp:"Although + clause. (‚Äúbut‚Äù also shows contrast but structure here targets although/though.)",
        expVi:"B√†i n√†y r√®n c·∫•u tr√∫c although + m·ªánh ƒë·ªÅ (d√π ‚Äúbut‚Äù c≈©ng tr√°i nghƒ©a nh∆∞ng kh√¥ng ƒë√∫ng tr·ªçng t√¢m b√†i)."
      },

      /* Ex3 (open) */
      { id:"cl2_ex3_free", type:"free",
        prompt:"Ex 3: Use your own ideas to complete the sentences. Then compare with a partner.",
        vi:"T·ª± ho√†n th√†nh c√¢u theo √Ω em r·ªìi so s√°nh v·ªõi b·∫°n.",
        exp:"Open-ended writing/speaking practice.",
        expVi:"B√†i m·ªü (luy·ªán vi·∫øt/n√≥i), kh√¥ng c√≥ ƒë√°p √°n c·ªë ƒë·ªãnh."
      },

      /* Ex4 (5 c√¢u tr·∫Øc nghi·ªám ·ªü ·∫£nh) */
      { id:"cl2_ex4_1", type:"mcq",
        prompt:"Ex 4: Mary overslept this morning ______ she went to bed early last night.",
        vi:"Mary s√°ng nay ng·ªß qu√™n ______ t·ªëi qua ƒëi ng·ªß s·ªõm.",
        opts:[
          {en:"A. although", vi:"A. m·∫∑c d√π"},
          {en:"B. because", vi:"B. b·ªüi v√¨"},
          {en:"C. so", vi:"C. v√¨ v·∫≠y"}
        ],
        ans:"A",
        exp:"Contrast: went to bed early ‚Üî overslept ‚Üí although.",
        expVi:"T∆∞∆°ng ph·∫£n: ng·ªß s·ªõm ‚Üî v·∫´n ng·ªß qu√™n ‚Üí although."
      },
      { id:"cl2_ex4_2", type:"mcq",
        prompt:"Ex 4: ______ the sun is shining, it isn‚Äôt very warm.",
        vi:"______ tr·ªùi n·∫Øng, nh∆∞ng kh√¥ng ·∫•m l·∫Øm.",
        opts:[
          {en:"A. Because", vi:"A. B·ªüi v√¨"},
          {en:"B. However", vi:"B. Tuy nhi√™n"},
          {en:"C. Though", vi:"C. M·∫∑c d√π"}
        ],
        ans:"C",
        exp:"Though/Although can start a clause: Though + clause, clause.",
        expVi:"Though/Although c√≥ th·ªÉ ƒë·ª©ng ƒë·∫ßu m·ªánh ƒë·ªÅ: Though + m·ªánh ƒë·ªÅ, m·ªánh ƒë·ªÅ."
      },
      { id:"cl2_ex4_3", type:"mcq",
        prompt:"Ex 4: I don‚Äôt like running. ______ I like swimming.",
        vi:"T√¥i kh√¥ng th√≠ch ch·∫°y. ______ t√¥i th√≠ch b∆°i.",
        opts:[
          {en:"A. But", vi:"A. Nh∆∞ng"},
          {en:"B. So", vi:"B. V√¨ v·∫≠y"},
          {en:"C. However", vi:"C. Tuy nhi√™n"}
        ],
        ans:"A",
        exp:"Two opposite likes/dislikes: ‚ÄúBut‚Äù fits best (simple contrast).",
        expVi:"Hai √Ω ƒë·ªëi l·∫≠p ƒë∆°n gi·∫£n ‚Üí ‚ÄúBut‚Äù ph√π h·ª£p nh·∫•t."
      },
      { id:"cl2_ex4_4", type:"mcq",
        prompt:"Ex 4: ______ the film was exciting, Jim fell asleep in the cinema.",
        vi:"______ phim h·∫•p d·∫´n, Jim v·∫´n ng·ªß g·∫≠t trong r·∫°p.",
        opts:[
          {en:"A. However", vi:"A. Tuy nhi√™n"},
          {en:"B. Although", vi:"B. M·∫∑c d√π"},
          {en:"C. Because", vi:"C. B·ªüi v√¨"}
        ],
        ans:"B",
        exp:"Although + clause expresses contrast in one sentence.",
        expVi:"Although + m·ªánh ƒë·ªÅ di·ªÖn t·∫£ t∆∞∆°ng ph·∫£n trong c√πng 1 c√¢u."
      },
      { id:"cl2_ex4_5", type:"mcq",
        prompt:"Ex 4: The story of the film is silly, ______ many people still enjoyed it.",
        vi:"C·ªët truy·ªán ng·ªõ ng·∫©n, ______ nhi·ªÅu ng∆∞·ªùi v·∫´n th√≠ch.",
        opts:[
          {en:"A. However", vi:"A. Tuy nhi√™n"},
          {en:"B. Though", vi:"B. M·∫∑c d√π"},
          {en:"C. But", vi:"C. Nh∆∞ng"}
        ],
        ans:"C",
        exp:"Comma + but + clause is a common structure for contrast inside one sentence.",
        expVi:"D·∫•u ph·∫©y + but + m·ªánh ƒë·ªÅ l√† c·∫•u tr√∫c r·∫•t ph·ªï bi·∫øn ƒë·ªÉ bi·ªÉu th·ªã ƒë·ªëi l·∫≠p trong 1 c√¢u."
      },

      /* Ex5 chain story (open) */
      { id:"cl2_ex5_free", type:"free",
        prompt:"Game: Chain story (group). Develop a story using although/though.",
        vi:"Tr√≤ ch∆°i: N·ªëi ti·∫øp c√¢u chuy·ªán theo nh√≥m, d√πng although/though.",
        exp:"Open speaking activity.",
        expVi:"Ho·∫°t ƒë·ªông n√≥i m·ªü, kh√¥ng c√≥ ƒë√°p √°n c·ªë ƒë·ªãnh."
      }
    ]
  },

  /* ------------------- PART 4: COMMUNICATION ------------------- */
  {
    id:"part4",
    title:"4. Communication",
    desc:"Everyday English: Accepting & declining suggestions",
    dialogue:{
      title:"Listen and read the conversations",
      titleVi:"Nghe v√† ƒë·ªçc h·ªôi tho·∫°i",
      roles:["Tom","Anna","Minh","Mi"],
      lines:[
        {sp:"Tom",  en:"How about going to the cinema tonight?", vi:"T·ªëi nay ƒëi r·∫°p chi·∫øu phim nh√©?" },
        {sp:"Anna", en:"That‚Äôs a great idea.", vi:"√ù hay ƒë·∫•y!" },
        {sp:"Minh", en:"Let‚Äôs go to see A Nightmare at Sao Mai Cinema tonight.", vi:"T·ªëi nay m√¨nh ƒëi xem A Nightmare ·ªü r·∫°p Sao Mai nh√©." },
        {sp:"Mi",   en:"I‚Äôd love to, but that‚Äôs too far for me to travel.", vi:"M√¨nh r·∫•t mu·ªën, nh∆∞ng xa qu√° n√™n m√¨nh ƒëi kh√¥ng ti·ªán." }
      ]
    },
    items:[
      { id:"com_free_1", type:"free",
        prompt:"Make similar conversations (pair work) for the situations in the book.",
        vi:"T·∫°o h·ªôi tho·∫°i t∆∞∆°ng t·ª± (l√†m vi·ªác theo c·∫∑p) theo c√°c t√¨nh hu·ªëng trong SGK.",
        exp:"Open practice. Use: accept (That‚Äôs a great idea.) / decline politely (I‚Äôd love to, but ‚Ä¶).",
        expVi:"B√†i m·ªü. D√πng m·∫´u: ƒë·ªìng √Ω (That‚Äôs a great idea.) / t·ª´ ch·ªëi l·ªãch s·ª± (I‚Äôd love to, but ‚Ä¶)."
      }
    ]
  },

  /* ------------------- PART 5: SKILLS 1 ------------------- */
  {
    id:"part5",
    title:"5. Skills 1",
    desc:"Survey listening + Reading blog + Speaking (p.87-88)",
    readingText:{
      title:"Mark‚Äôs blog (Reading)",
      titleVi:"B√†i ƒë·ªçc (blog c·ªßa Mark)",
      en:`Mon, Apr 20th<br>
      <b>Harry Potter and the Sorcerer‚Äôs Stone</b> is a fantasy. Its director is Chris Columbus. It is the first of the Harry Potter film <b>series</b>.<br><br>
      Daniel Radcliffe is one of the stars in the film.<br><br>
      The film tells the story of Harry Potter. He‚Äôs a powerful <b>wizard</b>. He is a student at a school for wizards and learns about himself, his family, and the bad things happening around him.<br><br>
      The film received a lot of good reviews. People say it‚Äôs a <b>must-see</b> for teens. I agree because the story is <b>gripping</b> and the acting is excellent. The music is also amazing.<br><br>
      Although <i>Harry Potter and the Sorcerer‚Äôs Stone</i> is a little frightening at times, it is very interesting and full of action. Go and see it if you can.<br><br>
      <i>Posted by Mark at 5.30 p.m.</i>`,
      vi:`Th·ª© Hai, ng√†y 20/4<br>
      <b>Harry Potter and the Sorcerer‚Äôs Stone</b> l√† m·ªôt b·ªô phim gi·∫£ t∆∞·ªüng. ƒê·∫°o di·ªÖn l√† Chris Columbus. ƒê√¢y l√† b·ªô phim ƒë·∫ßu ti√™n trong <b>series</b> (lo·∫°t phim) Harry Potter.<br><br>
      Daniel Radcliffe l√† m·ªôt trong nh·ªØng di·ªÖn vi√™n ch√≠nh c·ªßa phim.<br><br>
      Phim k·ªÉ c√¢u chuy·ªán v·ªÅ Harry Potter. C·∫≠u ·∫•y l√† m·ªôt <b>wizard</b> (ph√π th·ªßy) r·∫•t m·∫°nh. C·∫≠u l√† h·ªçc sinh c·ªßa m·ªôt tr∆∞·ªùng d·∫°y ph√π th·ªßy v√† h·ªçc v·ªÅ b·∫£n th√¢n, gia ƒë√¨nh m√¨nh, c≈©ng nh∆∞ nh·ªØng ƒëi·ªÅu x·∫•u ƒëang x·∫£y ra xung quanh.<br><br>
      Phim nh·∫≠n ƒë∆∞·ª£c r·∫•t nhi·ªÅu ƒë√°nh gi√° t·ªët. M·ªçi ng∆∞·ªùi n√≥i ƒë√¢y l√† b·ªô phim <b>must-see</b> (r·∫•t ƒë√°ng xem) cho tu·ªïi teen. T√¥i ƒë·ªìng √Ω v√¨ c·ªët truy·ªán <b>gripping</b> (h·∫•p d·∫´n, cu·ªën h√∫t) v√† di·ªÖn xu·∫•t r·∫•t xu·∫•t s·∫Øc. √Çm nh·∫°c c≈©ng tuy·ªát v·ªùi.<br><br>
      M·∫∑c d√π ƒë√¥i l√∫c phim h∆°i ƒë√°ng s·ª£, nh∆∞ng r·∫•t th√∫ v·ªã v√† ƒë·∫ßy h√†nh ƒë·ªông. H√£y xem n·∫øu b·∫°n c√≥ th·ªÉ.<br><br>
      <i>Mark ƒëƒÉng l√∫c 5:30 chi·ªÅu.</i>`
    },
    items:[
      /* Survey listening Ex3 fill blanks */
      { id:"sk1_listen_1", type:"fill",
        prompt:"Listening (Survey) Ex 3: What kind of films do you like (1) ______?",
        vi:"Nghe (Kh·∫£o s√°t) Ex 3: B·∫°n th√≠ch lo·∫°i phim n√†o (1) ______?",
        ans:"best",
        exp:"Common collocation: ‚Äúlike best‚Äù = th√≠ch nh·∫•t.",
        expVi:"C·ª•m th∆∞·ªùng d√πng: ‚Äúlike best‚Äù = th√≠ch nh·∫•t."
      },
      { id:"sk1_listen_2", type:"fill",
        prompt:"Listening (Survey) Ex 3: I love (2) ______.",
        vi:"Nghe Ex 3: T·ªõ th√≠ch (2) ______.",
        ans:"comedies",
        exp:"Lan says she loves comedies (phim h√†i).",
        expVi:"Lan n√≥i c√¥ ·∫•y th√≠ch phim h√†i (comedies)."
      },
      { id:"sk1_listen_3", type:"fill",
        prompt:"Listening (Survey) Ex 3: What‚Äôs the name of your (3) ______ comedy?",
        vi:"Nghe Ex 3: T√™n b·ªô phim h√†i (3) ______ c·ªßa b·∫°n l√† g√¨?",
        ans:"favourite",
        exp:"‚Äúfavourite‚Äù = y√™u th√≠ch nh·∫•t (BrE spelling).",
        expVi:"‚Äúfavourite‚Äù = y√™u th√≠ch nh·∫•t (c√°ch vi·∫øt Anh‚ÄìAnh)."
      },
      { id:"sk1_listen_4", type:"fill",
        prompt:"Listening (Survey) Ex 3: Who (4) ______ in it?",
        vi:"Nghe Ex 3: Ai (4) ______ trong ƒë√≥?",
        ans:"stars",
        exp:"‚Äústar in‚Äù = ƒë√≥ng vai ch√≠nh trong phim.",
        expVi:"‚Äústar in‚Äù = ƒë√≥ng vai ch√≠nh trong phim."
      },
      { id:"sk1_listen_5", type:"fill",
        prompt:"Listening (Survey) Ex 3: It‚Äôs very (5) ______.",
        vi:"Nghe Ex 3: N√≥ r·∫•t (5) ______.",
        ans:"funny",
        exp:"Review word: very funny.",
        expVi:"T·ª´ nh·∫≠n x√©t: r·∫•t h√†i."
      },

      /* Vocab match (Words-Meanings) */
      { id:"sk1_vocab_match", type:"match",
        prompt:"Reading Ex 2: Match the words with their meanings.",
        vi:"N·ªëi t·ª´ v·ªõi nghƒ©a.",
        pairs:[
          {l:"series",   r:"related films that tell stories about the same characters", viL:"series (lo·∫°t phim)", viR:"c√°c phim li√™n quan, c√πng nh√¢n v·∫≠t"},
          {l:"wizard",   r:"a man who has magical powers", viL:"wizard (ph√π th·ªßy)", viR:"ng∆∞·ªùi c√≥ ph√©p thu·∫≠t"},
          {l:"must-see", r:"something that is so good that you think others should see it", viL:"must-see (ƒë√°ng xem)", viR:"hay ƒë·∫øn m·ª©c n√™n xem"},
          {l:"gripping", r:"very exciting or interesting", viL:"gripping (cu·ªën h√∫t)", viR:"r·∫•t h·∫•p d·∫´n/th√∫ v·ªã"}
        ],
        exp:"Use the blog context: these words describe films and stories.",
        expVi:"D·ª±a ng·ªØ c·∫£nh b√†i blog: c√°c t·ª´ m√¥ t·∫£ phim/c·ªët truy·ªán."
      },

      /* Read Mark‚Äôs blog again - answer */
      { id:"sk1_q1", type:"mcq",
        prompt:"Read Mark‚Äôs blog again: What kind of film is Harry Potter and the Sorcerer‚Äôs Stone?",
        vi:"ƒê·ªçc l·∫°i blog: Harry Potter thu·ªôc th·ªÉ lo·∫°i g√¨?",
        opts:[
          {en:"A. Fantasy", vi:"A. Phim gi·∫£ t∆∞·ªüng"},
          {en:"B. Comedy", vi:"B. Phim h√†i"},
          {en:"C. Horror", vi:"C. Phim kinh d·ªã"}
        ],
        ans:"A",
        exp:"The blog states: ‚Äú...is a fantasy.‚Äù",
        expVi:"B√†i ƒë·ªçc ghi r√µ: ‚Äú...is a fantasy.‚Äù"
      },
      { id:"sk1_q2", type:"fill",
        prompt:"Read Mark‚Äôs blog again: Who is Daniel Radcliffe? (He is one of the ______.)",
        vi:"ƒê·ªçc l·∫°i blog: Daniel Radcliffe l√† ai? (√îng l√† m·ªôt trong nh·ªØng ______.)",
        ans:"stars",
        exp:"The blog says: ‚ÄúDaniel Radcliffe is one of the stars in the film.‚Äù",
        expVi:"B√†i ƒë·ªçc: ‚ÄúDaniel Radcliffe is one of the stars‚Ä¶‚Äù"
      },
      { id:"sk1_q3", type:"mcq",
        prompt:"Read Mark‚Äôs blog again: What is the film about?",
        vi:"ƒê·ªçc l·∫°i blog: Phim k·ªÉ v·ªÅ ƒëi·ªÅu g√¨?",
        opts:[
          {en:"A. A school teacher", vi:"A. M·ªôt gi√°o vi√™n"},
          {en:"B. Harry Potter, a powerful wizard student", vi:"B. Harry Potter ‚Äì m·ªôt h·ªçc sinh ph√π th·ªßy m·∫°nh m·∫Ω"},
          {en:"C. Two women exchanging houses", vi:"C. Hai ph·ª• n·ªØ ƒë·ªïi nh√†"}
        ],
        ans:"B",
        exp:"The blog: story of Harry Potter, a powerful wizard student at a school for wizards.",
        expVi:"B√†i ƒë·ªçc: k·ªÉ v·ªÅ Harry Potter ‚Äì ph√π th·ªßy m·∫°nh, h·ªçc ·ªü tr∆∞·ªùng ph√π th·ªßy."
      },
      { id:"sk1_q4", type:"mcq",
        prompt:"Read Mark‚Äôs blog again: What do people say about the film?",
        vi:"ƒê·ªçc l·∫°i blog: M·ªçi ng∆∞·ªùi n√≥i g√¨ v·ªÅ phim?",
        opts:[
          {en:"A. It is dull", vi:"A. Phim ch√°n"},
          {en:"B. It is a must-see for teens", vi:"B. R·∫•t ƒë√°ng xem v·ªõi tu·ªïi teen"},
          {en:"C. It is shocking and confusing", vi:"C. G√¢y s·ªëc v√† kh√≥ hi·ªÉu"}
        ],
        ans:"B",
        exp:"The blog: ‚ÄúPeople say it‚Äôs a must-see for teens.‚Äù",
        expVi:"B√†i ƒë·ªçc: ‚ÄúPeople say it‚Äôs a must-see for teens.‚Äù"
      },

      /* Speaking table (Kungfu Boy) - open practice */
      { id:"sk1_speaking_free", type:"free",
        prompt:"Speaking: Ask and answer about the film Kungfu Boy (use the table).",
        vi:"N√≥i: H·ªèi ‚Äì ƒë√°p v·ªÅ phim Kungfu Boy (d·ª±a b·∫£ng).",
        exp:"Info: Director John Stevenson; Type Comedy; Main actor Bruce Wane; Reviews funny and interesting; Time 4.30 p.m. & 8.30 p.m. daily; Place Ngoc Khanh Cinema.",
        expVi:"Th√¥ng tin: ƒê·∫°o di·ªÖn John Stevenson; Th·ªÉ lo·∫°i h√†i; Di·ªÖn vi√™n ch√≠nh Bruce Wane; Nh·∫≠n x√©t vui v√† th√∫ v·ªã; Su·∫•t 4:30 v√† 8:30 h·∫±ng ng√†y; R·∫°p Ng·ªçc Kh√°nh."
      }
    ]
  },

  /* ------------------- PART 6: SKILLS 2 ------------------- */
  {
    id:"part6",
    title:"6. Skills 2",
    desc:"Listening + Writing (p.89)",
    items:[
      { id:"sk2_free_1", type:"free",
        prompt:"Work in pairs: What do you like / dislike about a comedy?",
        vi:"L√†m vi·ªác theo c·∫∑p: B·∫°n th√≠ch/kh√¥ng th√≠ch ƒëi·ªÅu g√¨ ·ªü phim h√†i?",
        exp:"Open speaking practice.",
        expVi:"B√†i n√≥i m·ªü."
      },

      /* Listening: Naughty Twins (MCQ) */
      { id:"sk2_q0", type:"free",
        prompt:"Listening Ex 2: Mark and Hoa are talking about the film Naughty Twins. Who stars in the film?",
        vi:"Nghe Ex 2: Mark v√† Hoa n√≥i v·ªÅ phim Naughty Twins. Ai ƒë√≥ng vai ch√≠nh?",
        exp:"This is an open listening question (answer depends on the audio track).",
        expVi:"C√¢u h·ªèi nghe m·ªü (ƒë√°p √°n ph·ª• thu·ªôc audio). N·∫øu b·∫°n g·ª≠i ƒëo·∫°n audio/ghi ch√©p l·ªùi tho·∫°i, m√¨nh s·∫Ω ƒëi·ªÅn ch√≠nh x√°c 100%."
      },
      { id:"sk2_q1", type:"mcq",
        prompt:"Listening Ex 3: Naughty Twins is a ______.",
        vi:"Naughty Twins l√† phim ______.",
        opts:[
          {en:"A. comedy", vi:"A. phim h√†i"},
          {en:"B. science fiction film", vi:"B. phim khoa h·ªçc vi·ªÖn t∆∞·ªüng"},
          {en:"C. horror film", vi:"C. phim kinh d·ªã"}
        ],
        ans:"A",
        exp:"From the listening task: it is a comedy.",
        expVi:"Theo b√†i nghe: ƒë√≥ l√† phim h√†i."
      },
      { id:"sk2_q2", type:"mcq",
        prompt:"Listening Ex 3: The main characters are ______.",
        vi:"Nh√¢n v·∫≠t ch√≠nh l√† ______.",
        opts:[
          {en:"A. old classmates", vi:"A. b·∫°n h·ªçc c≈©"},
          {en:"B. twin brothers", vi:"B. c·∫∑p anh em sinh ƒë√¥i"},
          {en:"C. twin sisters", vi:"C. c·∫∑p ch·ªã em sinh ƒë√¥i"}
        ],
        ans:"C",
        exp:"The listening says the main characters are twin sisters.",
        expVi:"B√†i nghe cho bi·∫øt nh√¢n v·∫≠t ch√≠nh l√† c·∫∑p ch·ªã em sinh ƒë√¥i."
      },
      { id:"sk2_q3", type:"mcq",
        prompt:"Listening Ex 3: Where do the twins meet each other for the first time?",
        vi:"Hai ch·ªã em g·∫∑p nhau l·∫ßn ƒë·∫ßu ·ªü ƒë√¢u?",
        opts:[
          {en:"A. At a summer camp", vi:"A. ·ªû tr·∫°i h√®"},
          {en:"B. At a summer school", vi:"B. ·ªû tr∆∞·ªùng h√®"},
          {en:"C. At a hospital", vi:"C. ·ªû b·ªánh vi·ªán"}
        ],
        ans:"A",
        exp:"They meet for the first time at a summer camp.",
        expVi:"H·ªç g·∫∑p nhau l·∫ßn ƒë·∫ßu ·ªü tr·∫°i h√®."
      },
      { id:"sk2_q4", type:"mcq",
        prompt:"Listening Ex 3: People say Naughty Twins is a film that ______.",
        vi:"Ng∆∞·ªùi ta n√≥i Naughty Twins l√† b·ªô phim ______.",
        opts:[
          {en:"A. young people should see", vi:"A. ng∆∞·ªùi tr·∫ª n√™n xem"},
          {en:"B. young people shouldn‚Äôt see", vi:"B. ng∆∞·ªùi tr·∫ª kh√¥ng n√™n xem"},
          {en:"C. is shocking", vi:"C. g√¢y s·ªëc"}
        ],
        ans:"A",
        exp:"The listening suggests it‚Äôs a film young people should see.",
        expVi:"B√†i nghe g·ª£i √Ω ƒë√¢y l√† phim ng∆∞·ªùi tr·∫ª n√™n xem."
      },

      /* Writing notes (open) */
      { id:"sk2_write_notes", type:"free",
        prompt:"Writing Ex 4: Make notes about one of your favourite films.",
        vi:"Vi·∫øt Ex 4: Ghi ch√∫ v·ªÅ m·ªôt b·ªô phim em y√™u th√≠ch.",
        exp:"Notes: Name / Type / Actors-Actresses-Director / Summary / Features / Reviews.",
        expVi:"Ghi ch√∫: T√™n phim / Th·ªÉ lo·∫°i / Di·ªÖn vi√™n-ƒë·∫°o di·ªÖn / T√≥m t·∫Øt / ƒêi·ªÉm n·ªïi b·∫≠t / Nh·∫≠n x√©t."
      },
      { id:"sk2_write_para", type:"free",
        prompt:"Writing Ex 5: Write a paragraph (~70 words) about your favourite film using your notes.",
        vi:"Vi·∫øt Ex 5: Vi·∫øt ƒëo·∫°n kho·∫£ng 70 t·ª´ v·ªÅ phim y√™u th√≠ch d·ª±a ghi ch√∫.",
        exp:"Open writing task (no fixed answer).",
        expVi:"B√†i vi·∫øt m·ªü (kh√¥ng c√≥ ƒë√°p √°n c·ªë ƒë·ªãnh)."
      }
    ]
  },

  /* ------------------- PART 7: LOOKING BACK ------------------- */
  {
    id:"part7",
    title:"7. Looking Back",
    desc:"Vocabulary + Grammar review (p.90)",
    items:[
      { id:"lb_ex1_match", type:"match",
        prompt:"Vocab Ex 1: Match the types of film in A with their descriptions in B.",
        vi:"T·ª´ v·ª±ng Ex 1: N·ªëi th·ªÉ lo·∫°i phim (c·ªôt A) v·ªõi m√¥ t·∫£ (c·ªôt B).",
        pairs:[
          {l:"science fiction film", r:"This type of film is about life in the future, robots, and space travel.", viL:"phim khoa h·ªçc vi·ªÖn t∆∞·ªüng", viR:"v·ªÅ t∆∞∆°ng lai, robot, du h√†nh v≈© tr·ª•"},
          {l:"comedy", r:"This type of film makes you laugh.", viL:"phim h√†i", viR:"l√†m b·∫°n c∆∞·ªùi"},
          {l:"horror film", r:"This is a frightening type of film.", viL:"phim kinh d·ªã", viR:"th·ªÉ lo·∫°i ƒë√°ng s·ª£"},
          {l:"documentary", r:"This type of film gives useful information about animals, science or technology.", viL:"phim t√†i li·ªáu", viR:"cung c·∫•p th√¥ng tin h·ªØu √≠ch"},
          {l:"fantasy", r:"This type of film has supernatural events.", viL:"phim gi·∫£ t∆∞·ªüng", viR:"c√≥ y·∫øu t·ªë si√™u nhi√™n"}
        ],
        exp:"Match each film type with its defining description.",
        expVi:"Gh√©p m·ªói th·ªÉ lo·∫°i v·ªõi m√¥ t·∫£ ƒë·∫∑c tr∆∞ng."
      },

      { id:"lb_ex2_free", type:"free",
        prompt:"Vocab Ex 2: Give an example for every film type in the box.",
        vi:"T·ª´ v·ª±ng Ex 2: N√™u v√≠ d·ª• cho t·ª´ng th·ªÉ lo·∫°i.",
        exp:"Open. Example given: a comedy ‚Äì Mr Bean.",
        expVi:"B√†i m·ªü. V√≠ d·ª• SGK: phim h√†i ‚Äì Mr Bean."
      },

      /* Ex3 (6 c√¢u) */
      { id:"lb_ex3_1", type:"mcq",
        prompt:"Ex 3: The film was long and ______. Many people went home before it ended.",
        vi:"B·ªô phim d√†i v√† ______. Nhi·ªÅu ng∆∞·ªùi v·ªÅ tr∆∞·ªõc khi k·∫øt th√∫c.",
        opts:[
          {en:"A. funny", vi:"A. h√†i"},
          {en:"B. shocking", vi:"B. g√¢y s·ªëc"},
          {en:"C. dull", vi:"C. ch√°n/nh·∫°t"}
        ],
        ans:"C",
        exp:"Long + people leave early ‚Üí dull (boring).",
        expVi:"D√†i v√† ng∆∞·ªùi v·ªÅ s·ªõm ‚Üí dull (ch√°n)."
      },
      { id:"lb_ex3_2", type:"mcq",
        prompt:"Ex 3: The film is too ______ with a lot of fighting and killing scenes.",
        vi:"B·ªô phim qu√° ______ v√¨ c√≥ nhi·ªÅu c·∫£nh ƒë√°nh nhau v√† gi·∫øt ch√≥c.",
        opts:[
          {en:"A. funny", vi:"A. h√†i"},
          {en:"B. violent", vi:"B. b·∫°o l·ª±c"},
          {en:"C. interesting", vi:"C. th√∫ v·ªã"}
        ],
        ans:"B",
        exp:"Fighting and killing ‚Üí violent.",
        expVi:"ƒê√°nh nhau v√† gi·∫øt ch√≥c ‚Üí violent (b·∫°o l·ª±c)."
      },
      { id:"lb_ex3_3", type:"mcq",
        prompt:"Ex 3: A ______ story often makes us feel afraid.",
        vi:"M·ªôt c√¢u chuy·ªán ______ th∆∞·ªùng l√†m ta s·ª£.",
        opts:[
          {en:"A. moving", vi:"A. c·∫£m ƒë·ªông"},
          {en:"B. interesting", vi:"B. th√∫ v·ªã"},
          {en:"C. frightening", vi:"C. ƒë√°ng s·ª£"}
        ],
        ans:"C",
        exp:"Feel afraid ‚Üí frightening.",
        expVi:"Khi·∫øn s·ª£ ‚Üí frightening."
      },
      { id:"lb_ex3_4", type:"mcq",
        prompt:"Ex 3: The news was ______. I couldn‚Äôt believe it.",
        vi:"Tin t·ª©c th·∫≠t ______. T√¥i kh√¥ng th·ªÉ tin n·ªïi.",
        opts:[
          {en:"A. shocking", vi:"A. g√¢y s·ªëc"},
          {en:"B. funny", vi:"B. bu·ªìn c∆∞·ªùi"},
          {en:"C. confusing", vi:"C. kh√≥ hi·ªÉu"}
        ],
        ans:"A",
        exp:"Couldn‚Äôt believe ‚Üí shocking.",
        expVi:"Kh√¥ng th·ªÉ tin n·ªïi ‚Üí shocking."
      },
      { id:"lb_ex3_5", type:"mcq",
        prompt:"Ex 3: ______ films often make us cry.",
        vi:"Phim ______ th∆∞·ªùng l√†m ta kh√≥c.",
        opts:[
          {en:"A. Amusing", vi:"A. vui nh·ªôn"},
          {en:"B. Moving", vi:"B. c·∫£m ƒë·ªông"},
          {en:"C. Funny", vi:"C. h√†i"}
        ],
        ans:"B",
        exp:"Cry ‚Üí moving.",
        expVi:"L√†m kh√≥c ‚Üí moving."
      },
      { id:"lb_ex3_6", type:"mcq",
        prompt:"Ex 3: The road signs were ______ and we soon got lost.",
        vi:"Bi·ªÉn b√°o ƒë∆∞·ªùng ______ n√™n ch√∫ng t√¥i s·ªõm b·ªã l·∫°c.",
        opts:[
          {en:"A. confusing", vi:"A. kh√≥ hi·ªÉu"},
          {en:"B. shocking", vi:"B. g√¢y s·ªëc"},
          {en:"C. interesting", vi:"C. th√∫ v·ªã"}
        ],
        ans:"A",
        exp:"Road signs hard to understand ‚Üí confusing.",
        expVi:"Bi·ªÉn b√°o kh√≥ hi·ªÉu ‚Üí confusing."
      },

      /* Ex4 match halves */
      { id:"lb_ex4_match", type:"match",
        prompt:"Grammar Ex 4: Match the sentence halves in columns A and B.",
        vi:"Ng·ªØ ph√°p Ex 4: N·ªëi n·ª≠a c√¢u ·ªü c·ªôt A v·ªõi c·ªôt B.",
        pairs:[
          {l:"Although he arrived late,", r:"he left the cinema early.", viL:"M·∫∑c d√π anh ·∫•y ƒë·∫øn mu·ªôn,", viR:"anh ·∫•y r·ªùi r·∫°p s·ªõm."},
          {l:"The film received good reviews.", r:"However, only a few people saw it.", viL:"B·ªô phim ƒë∆∞·ª£c ƒë√°nh gi√° t·ªët.", viR:"Tuy nhi√™n, ch·ªâ √≠t ng∆∞·ªùi xem."},
          {l:"Though popcorn and other snacks in the cinema are very expensive,", r:"people still buy them.", viL:"M·∫∑c d√π b·ªèng ng√¥ v√† ƒë·ªì ƒÉn v·∫∑t trong r·∫°p r·∫•t ƒë·∫Øt,", viR:"m·ªçi ng∆∞·ªùi v·∫´n mua."},
          {l:"Cinema tickets are expensive.", r:"However, the number of people going to cinemas is increasing.", viL:"V√© xem phim ƒë·∫Øt.", viR:"Tuy nhi√™n, s·ªë ng∆∞·ªùi ƒëi r·∫°p ƒëang tƒÉng."},
          {l:"Although I don‚Äôt really like to go to the cinema,", r:"I don‚Äôt want to stay home tonight.", viL:"M·∫∑c d√π t√¥i kh√¥ng th√≠ch ƒëi r·∫°p l·∫Øm,", viR:"t√¥i kh√¥ng mu·ªën ·ªü nh√† t·ªëi nay."}
        ],
        exp:"Match by meaning and grammar connectors (although/though/however).",
        expVi:"Gh√©p theo nghƒ©a v√† li√™n t·ª´ (although/though/however)."
      }
    ]
  }
];

/* =========================
   STATE
   ========================= */
const state = {
  activePart: 0,
  answers: {},   // { qid: value }
  checked: {},   // { partId: true }
  voiceOn: false
};

/* =========================
   SIMPLE BEEP AUDIO (GAME SFX + BG)
   ========================= */
const AudioContext = window.AudioContext || window.webkitAudioContext;
let audioCtx;
let isMusicOn = false;
let musicInterval;

function ensureAudioCtx() {
  if (!audioCtx) audioCtx = new AudioContext();
  if (audioCtx.state === 'suspended') audioCtx.resume();
}

function playSound(type) {
  ensureAudioCtx();
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.connect(g); g.connect(audioCtx.destination);

  const now = audioCtx.currentTime;
  if(type === 'correct') {
    o.type = 'sine';
    o.frequency.setValueAtTime(520, now);
    o.frequency.exponentialRampToValueAtTime(1040, now + 0.12);
    g.gain.setValueAtTime(0.08, now);
    g.gain.linearRampToValueAtTime(0, now + 0.28);
    o.start(now); o.stop(now + 0.28);
  } else if (type === 'wrong') {
    o.type = 'sawtooth';
    o.frequency.setValueAtTime(170, now);
    o.frequency.linearRampToValueAtTime(120, now + 0.2);
    g.gain.setValueAtTime(0.08, now);
    g.gain.linearRampToValueAtTime(0, now + 0.22);
    o.start(now); o.stop(now + 0.22);
  } else if (type === 'click') {
    o.type = 'triangle';
    o.frequency.setValueAtTime(820, now);
    g.gain.setValueAtTime(0.05, now);
    g.gain.exponentialRampToValueAtTime(0.001, now + 0.06);
    o.start(now); o.stop(now + 0.06);
  }
}

function toggleMusic() {
  isMusicOn = !isMusicOn;
  document.getElementById('toggleMusic').classList.toggle('active', isMusicOn);
  if(isMusicOn) {
    ensureAudioCtx();
    playBgMusic();
  } else {
    clearInterval(musicInterval);
  }
}

function playBgMusic() {
  const notes = [261.63, 329.63, 392.00, 523.25]; // C major
  let i = 0;
  clearInterval(musicInterval);
  musicInterval = setInterval(() => {
    ensureAudioCtx();
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.connect(g); g.connect(audioCtx.destination);
    o.type = 'sine';
    o.frequency.value = notes[i % notes.length];
    g.gain.setValueAtTime(0.02, audioCtx.currentTime);
    g.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 1.4);
    o.start(); o.stop(audioCtx.currentTime + 1.4);
    i++;
  }, 1800);
}

/* =========================
   TTS (SpeechSynthesis)
   ========================= */
function pickVoice(preferFemale=true) {
  const voices = speechSynthesis.getVoices ? speechSynthesis.getVoices() : [];
  const en = voices.filter(v => (v.lang||"").toLowerCase().startsWith("en"));
  if (!en.length) return null;

  // Heuristic: pick a female-ish voice name if possible
  const femaleHints = ["female","woman","zira","susan","samantha","victoria","karen","moira","tessa","ava"];
  const maleHints   = ["male","man","david","daniel","alex","thomas","mark","george","fred"];

  const pool = preferFemale ? femaleHints : maleHints;
  let v = en.find(v => pool.some(h => (v.name||"").toLowerCase().includes(h)));
  if (!v) v = en[0];
  return v;
}

function speakText(text, preferFemale=true) {
  if (!state.voiceOn) return;
  if (!("speechSynthesis" in window)) return;

  speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "en-US";
  const v = pickVoice(preferFemale);
  if (v) u.voice = v;
  u.rate = 0.95;
  u.pitch = preferFemale ? 1.05 : 0.95;
  speechSynthesis.speak(u);
}

function speakDialogue(dialogue, mode="all") {
  if (!dialogue) return;
  // speak sequential lines with small delay (simple approach)
  speechSynthesis.cancel();
  const lines = dialogue.lines || [];
  let i = 0;

  function next() {
    if (i >= lines.length) return;
    const L = lines[i++];
    const sp = (L.sp||"").toLowerCase();
    const preferFemale = ["mi","anna","hoa","lan"].includes(sp);
    const u = new SpeechSynthesisUtterance(L.en);
    u.lang = "en-US";
    const v = pickVoice(preferFemale);
    if (v) u.voice = v;
    u.rate = 0.95;
    u.pitch = preferFemale ? 1.05 : 0.95;
    u.onend = () => setTimeout(next, 120);
    if (state.voiceOn) speechSynthesis.speak(u);
  }

  if (state.voiceOn) next();
}

/* =========================
   RENDER
   ========================= */
const mainEl = document.getElementById('mainContent');
const navEl  = document.getElementById('navMenu');

function init() {
  renderNav();
  renderPart(0);
  // voices sometimes load async
  if ("speechSynthesis" in window) {
    speechSynthesis.onvoiceschanged = () => {};
  }
}

function isGradable(q) {
  return ["mcq","fill","match"].includes(q.type);
}

function renderNav() {
  navEl.innerHTML = '';
  DB.forEach((part, idx) => {
    const btn = document.createElement('button');
    btn.className = `nav-item ${state.activePart === idx ? 'active' : ''}`;

    const gradable = part.items.filter(isGradable);
    const total = gradable.length;
    let answered = 0;

    gradable.forEach(q => {
      const v = state.answers[q.id];
      if (q.type === "match") {
        if (v && Object.keys(JSON.parse(v || "{}")).length) answered++;
      } else if (v && String(v).trim() !== "") answered++;
    });

    btn.innerHTML = `<div>${part.title}</div><div class="nav-tag">${answered}/${total}</div>`;
    btn.onclick = () => {
      playSound('click');
      state.activePart = idx;
      renderNav();
      renderPart(idx);
    };
    navEl.appendChild(btn);
  });

  updateStats();
}

function renderPart(idx) {
  const part = DB[idx];
  const isChecked = !!state.checked[part.id];

  let html = `
    <div class="section-header">
      <div>
        <div class="section-title">${part.title}</div>
        <div class="section-sub">${part.desc || ""}</div>
      </div>
    </div>
  `;

  // Dialogue
  if (part.dialogue) {
    html += `
      <div class="dialogue">
        <div class="reading-title">
          <div>üí¨ ${part.dialogue.title} <span style="font-weight:800;color:#64748b;font-size:12px">(${part.dialogue.titleVi})</span></div>
        </div>
        <div class="dlg-tools">
          <button class="chip" id="dlgPlayAll">‚ñ∂Ô∏è Play (All roles)</button>
          <button class="chip" id="dlgStop">‚èπ Stop</button>
        </div>
        ${part.dialogue.lines.map(L => `
          <div class="dlg-line">
            <div class="dlg-speaker">${L.sp}:</div>
            <div>
              <div class="dlg-text">${L.en}</div>
              <div class="dlg-vi">${L.vi}</div>
            </div>
          </div>
        `).join("")}
      </div>
    `;
  }

  // Reading text
  if (part.readingText) {
    html += `
      <div class="reading-box">
        <div class="reading-title">
          <div>üìñ ${part.readingText.title} <span style="font-weight:800;color:#64748b;font-size:12px">(${part.readingText.titleVi})</span></div>
          <div class="reading-actions">
            <button class="mini-btn" id="readEnBtn">üîä Read EN</button>
            <button class="mini-btn" id="stopTtsBtn">‚èπ Stop</button>
          </div>
        </div>
        <div>${part.readingText.en}</div>
        <div class="prompt-vi" style="display:none" id="readingVi">${part.readingText.vi}</div>
      </div>
    `;
  }

  html += `<div id="questionsList"></div>`;
  mainEl.innerHTML = html;

  // Attach dialogue buttons
  if (part.dialogue) {
    const playAll = document.getElementById('dlgPlayAll');
    const stop = document.getElementById('dlgStop');
    if (playAll) playAll.onclick = () => speakDialogue(part.dialogue);
    if (stop) stop.onclick = () => { if ("speechSynthesis" in window) speechSynthesis.cancel(); };
  }

  // Attach reading buttons + show VI with toggle
  if (part.readingText) {
    const readBtn = document.getElementById('readEnBtn');
    const stopBtn = document.getElementById('stopTtsBtn');
    const viBlock = document.getElementById('readingVi');
    // show/hide vi block controlled by body.show-vi
    const syncVi = () => {
      if (!viBlock) return;
      viBlock.style.display = document.body.classList.contains("show-vi") ? "block" : "none";
    };
    syncVi();
    readBtn && (readBtn.onclick = () => speakText(stripHtml(part.readingText.en), true));
    stopBtn && (stopBtn.onclick = () => { if ("speechSynthesis" in window) speechSynthesis.cancel(); });
    // re-sync on every render toggle via observer-like quick hack:
    const _old = document.getElementById('toggleVi').onclick;
    document.getElementById('toggleVi').onclick = (e) => {
      document.body.classList.toggle('show-vi');
      e.target.classList.toggle('active');
      syncVi();
    };
  } else {
    // restore normal VN toggle
    document.getElementById('toggleVi').onclick = (e) => {
      document.body.classList.toggle('show-vi');
      e.target.classList.toggle('active');
      // rerender to show/hide reading vi if needed
      renderPart(state.activePart);
    };
  }

  const list = document.getElementById('questionsList');

  part.items.forEach((q, qIdx) => {
    const card = document.createElement('div');
    card.className = 'q-card';
    const userVal = state.answers[q.id];

    let cardHtml = `
      <div class="q-top">
        <div class="q-badge">Question ${qIdx + 1}</div>
        <div class="q-badge" style="color:var(--primary)">${q.type.toUpperCase()}</div>
      </div>
      <div class="q-content">
        <div class="prompt">${q.prompt}</div>
        <div class="prompt-vi">${q.vi || ""}</div>
        <div class="input-area">
    `;

    // Input UI
    if(q.type === 'mcq') {
      cardHtml += `<div class="opt-group">`;
      q.opts.forEach(opt => {
        const val = opt.en.trim().charAt(0); // A/B/C
        const isSelected = userVal === val;
        cardHtml += `
          <label class="opt-label ${isSelected ? 'selected' : ''}">
            <div class="opt-circle"></div>
            <input type="radio" name="${q.id}" value="${val}" ${isSelected?'checked':''} ${isChecked?'disabled':''}>
            <div class="opt-text">
              <div>${opt.en}</div>
              <div class="opt-vi">${opt.vi}</div>
            </div>
          </label>
        `;
      });
      cardHtml += `</div>`;
    }
    else if(q.type === 'fill') {
      cardHtml += `
        <input type="text" class="text-input" placeholder="Type answer..." 
          value="${userVal ? escapeHtml(userVal) : ''}" ${isChecked?'disabled':''} data-qid="${q.id}">
      `;
    }
    else if(q.type === 'match') {
      const savedMatch = userVal ? JSON.parse(userVal) : {};
      q.pairs.forEach((pair, pIdx) => {
        const rOpts = q.pairs.map(p => p.r).sort();
        const leftLabel = pair.viL ? `${pair.l} <span style="display:block;color:#059669;font-style:italic;font-weight:650;font-size:13px">${pair.viL}</span>` : pair.l;

        cardHtml += `
          <div class="match-row">
            <div style="font-weight:900; font-size:14px">${leftLabel}</div>
            <select class="match-select" data-qid="${q.id}" data-idx="${pIdx}" ${isChecked?'disabled':''}>
              <option value="">-- Select --</option>
              ${rOpts.map(opt => {
                // find viR for this option if exists
                const found = q.pairs.find(p => p.r === opt);
                const label = found && found.viR
                  ? `${opt} ‚Äî ${found.viR}`
                  : opt;
                return `<option value="${escapeHtml(opt)}" ${savedMatch[pIdx]===opt?'selected':''}>${escapeHtml(label)}</option>`;
              }).join('')}
            </select>
          </div>
        `;
      });
    }
    else if(q.type === 'free') {
      cardHtml += `
        <div class="note">
          ${escapeHtml(q.exp || "Open practice.")}
          <div class="note-vi">${escapeHtml(q.expVi || "")}</div>
        </div>
      `;
    }

    cardHtml += `</div>`; // input-area

    // Feedback if checked and gradable
    if(isChecked && isGradable(q)) {
      const ok = checkAnswer(q, userVal);
      cardHtml += `
        <div class="feedback ${ok ? '' : 'wrong'}">
          <span class="fb-title">${ok ? '‚úÖ CORRECT' : '‚ùå INCORRECT'}</span>
          ${!ok ? `<div>ƒê√°p √°n ƒë√∫ng: <span class="fb-ok">${escapeHtml(getCorrectStr(q))}</span></div>` : ''}
          ${q.exp ? `<div class="exp">${escapeHtml(q.exp)}</div>` : ''}
          ${q.expVi ? `<div class="exp-vi">${escapeHtml(q.expVi)}</div>` : ''}
        </div>
      `;
    }

    cardHtml += `</div>`; // q-content
    card.innerHTML = cardHtml;
    list.appendChild(card);

    // Event listeners
    if(!isChecked) {
      if(q.type === 'mcq') {
        const radios = card.querySelectorAll('input[type="radio"]');
        radios.forEach(r => r.addEventListener('change', (e) => {
          state.answers[q.id] = e.target.value;
          renderPart(idx);
          renderNav();
        }));
      }
      else if(q.type === 'fill') {
        const input = card.querySelector('input');
        input && input.addEventListener('input', (e) => {
          state.answers[q.id] = e.target.value;
        });
        input && input.addEventListener('blur', () => renderNav());
      }
      else if(q.type === 'match') {
        const selects = card.querySelectorAll('select');
        selects.forEach(sel => sel.addEventListener('change', () => {
          const current = state.answers[q.id] ? JSON.parse(state.answers[q.id]) : {};
          current[sel.dataset.idx] = sel.value;
          state.answers[q.id] = JSON.stringify(current);
          renderNav();
        }));
      }
    }
  });

  updateStats();
}

function checkAnswer(q, userVal) {
  if(!userVal) return false;

  if(q.type === 'mcq') return userVal === q.ans;
  if(q.type === 'fill') return userVal.trim().toLowerCase() === q.ans.toLowerCase();
  if(q.type === 'match') {
    const obj = JSON.parse(userVal || "{}");
    return q.pairs.every((p,i) => obj[i] === p.r);
  }
  return false;
}

function getCorrectStr(q) {
  if(q.type === 'mcq') return q.ans;
  if(q.type === 'fill') return q.ans;
  if(q.type === 'match') return "Xem c√°c c·∫∑p ƒë√∫ng theo b·∫£ng (ƒë√£ ch·∫•m theo logic).";
  return "";
}

function updateStats() {
  let total = 0, answered = 0, correct = 0;

  DB.forEach(part => {
    part.items.forEach(q => {
      if(!isGradable(q)) return;
      total++;
      const v = state.answers[q.id];
      const hasAnswer = (q.type === "match")
        ? (v && Object.keys(JSON.parse(v || "{}")).length)
        : (v && String(v).trim() !== "");
      if(hasAnswer) answered++;

      if(state.checked[part.id] && hasAnswer && checkAnswer(q, v)) correct++;
    });
  });

  document.getElementById('scoreDisplay').textContent = correct;
  const pct = total ? Math.round((answered / total) * 100) : 0;
  document.getElementById('progressDisplay').textContent = pct + "%";
}

/* =========================
   GLOBAL EVENTS
   ========================= */
document.getElementById('checkSectionBtn').addEventListener('click', () => {
  const partId = DB[state.activePart].id;
  state.checked[partId] = true;
  playSound('correct');
  renderPart(state.activePart);
  renderNav();
});

document.getElementById('resetBtn').addEventListener('click', () => {
  if(confirm("X√≥a h·∫øt k·∫øt qu·∫£?")) {
    state.answers = {};
    state.checked = {};
    renderNav();
    renderPart(state.activePart);
  }
});

document.getElementById('toggleVoice').addEventListener('click', (e) => {
  state.voiceOn = !state.voiceOn;
  e.target.classList.toggle('active', state.voiceOn);
  if (state.voiceOn) {
    // prime voices on mobile
    if ("speechSynthesis" in window) {
      speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance("Voice on.");
      u.lang = "en-US";
      u.rate = 1;
      speechSynthesis.speak(u);
    }
  } else {
    if ("speechSynthesis" in window) speechSynthesis.cancel();
  }
});

document.getElementById('toggleMusic').addEventListener('click', toggleMusic);

/* VN toggle handled inside renderPart to sync reading VI blocks.
   But keep a fallback: */
document.getElementById('toggleVi').onclick = (e) => {
  document.body.classList.toggle('show-vi');
  e.target.classList.toggle('active');
  renderPart(state.activePart);
};

function stripHtml(html) {
  const tmp = document.createElement("div");
  tmp.innerHTML = html;
  return tmp.textContent || tmp.innerText || "";
}
function escapeHtml(str) {
  return String(str ?? "")
    .replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")
    .replaceAll('"',"&quot;").replaceAll("'","&#039;");
}

/* START */
init();
</script>
</body>
</html>
